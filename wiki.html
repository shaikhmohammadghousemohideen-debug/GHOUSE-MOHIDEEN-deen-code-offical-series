<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GHOUSE — Series Updates</title>
  <meta name="robots" content="index,follow">
  <style>
    :root{
      --bg:#030405;
      --panel:#071014;
      --accent:#00ff77;
      --muted:#7fffb0;
      --glass: rgba(0,0,0,0.24);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:ui-monospace,Menlo,Monaco,Consolas,'Courier New',monospace;background:linear-gradient(180deg,#000814 0%, #030405 60%);color:var(--accent);-webkit-font-smoothing:antialiased}
    #canvas{position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.12}
    header{position:relative;z-index:2;padding:28px 28px 18px;border-bottom:1px solid rgba(0,255,119,.05);display:flex;align-items:center;gap:16px}
    .logo{
      width:64px;height:64px;border-radius:10px;border:1px solid rgba(0,255,119,.08);display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,255,119,.03),transparent);
      box-shadow:0 6px 20px rgba(0,0,0,.6);
    }
    .logo code{font-weight:700;color:var(--accent);font-size:20px}
    h1{margin:0;font-size:20px;letter-spacing:.6px}
    .sub{margin:0;color:var(--muted);font-size:13px}
    .wrap{position:relative;z-index:2;max-width:1100px;margin:20px auto;padding:0 18px}
    main#feed{display:grid;gap:14px;grid-template-columns:1fr 380px;align-items:start}
    .col-main{min-width:0}
    .col-side{position:relative}
    .post{background:linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.16));border:1px solid rgba(0,255,119,.06);padding:16px;border-radius:10px;box-shadow:0 8px 30px rgba(0,0,0,.6)}
    .post h2{margin:0 0 6px;font-size:18px}
    .meta{font-size:12px;color:var(--muted);margin-bottom:10px}
    .content{white-space:pre-wrap;color:#d7ffd9;line-height:1.45}
    .terminal{background:rgba(0,0,0,.45);padding:10px;border-radius:8px;font-size:13px;color:var(--muted)}
    aside.panel{position:sticky;top:22px;padding:14px;background:var(--panel);border-radius:10px;border:1px solid rgba(0,255,119,.04);height:max-content}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;border:1px solid rgba(0,255,119,.08);text-decoration:none;color:var(--accent);font-size:13px}
    .small{font-size:12px;color:var(--muted)}
    footer{margin-top:20px;text-align:center;color:var(--muted);font-size:13px;padding-bottom:34px}
    /* responsive */
    @media (max-width:980px){
      main#feed{grid-template-columns:1fr}
      .logo{width:48px;height:48px}
    }
    /* tiny animations */
    .pulse{animation:pulse 2.2s infinite}
    @keyframes pulse{0%{opacity:1}50%{opacity:.6}100%{opacity:1}}
    .tag{display:inline-block;padding:6px 8px;border-radius:999px;background:rgba(0,255,119,.04);border:1px solid rgba(0,255,119,.03);font-size:12px;color:var(--muted);margin-right:6px}
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>

  <header>
    <div class="logo"><code>GH</code></div>
    <div>
      <h1>GHOUSE — Series Updates</h1>
      <p class="sub">Hacker-style static feed — edit this file to post updates. Commit & push from Termux.</p>
    </div>
  </header>

  <div class="wrap">
    <main id="feed">
      <section class="col-main" id="postsColumn">
        <!-- posts will be injected here -->
      </section>

      <aside class="col-side">
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
            <div><strong class="small">Control</strong></div>
            <div><span class="tag">Hacker UI</span></div>
          </div>

          <div class="terminal small" id="postCount">Loading posts…</div>
          <div style="height:12px"></div>
          <div class="small">To publish new update: open this file, find <code>/* POSTS LIST */</code>, add an object to the top of the array, save, commit & push.</div>
          <div style="height:10px"></div>
          <div style="display:flex;gap:8px;margin-top:10px">
            <a class="btn" href="https://github.com" target="_blank" rel="noopener">Open GitHub</a>
            <a class="btn" id="downloadBtn" href="#" download="gh-updates.html">Download</a>
          </div>
        </div>
      </aside>
    </main>

    <footer>
      <div class="small">Static site — editing this file is how you post. Use Termux: <code>nano index.html</code> then <code>git add . &amp;&amp; git commit -m "Add update" &amp;&amp; git push</code></div>
    </footer>
  </div>

  <script>
/* ============================================================
   POSTS LIST
   Edit this array to add new updates.
   Each post object: { id, title, date (ISO), content (plain text or HTML), tags: [] }
   Example: 
   { id:3, title:"Episode 3 — Breach", date:"2025-11-05T08:00:00Z", content:"Details here.", tags:["episode","release"] }
   ============================================================ */
const posts = [
  {
    id: 3,
    title: "Series launch — build 0.1",
    date: "2025-11-03T09:00:00Z",
    content: "First release: skeleton site and publishing workflow. Edit this file to add new updates. Use Termux to commit & push.",
    tags: ["launch","build"]
  },
  {
    id: 2,
    title: "Episode 0 — Teaser",
    date: "2025-11-02T06:00:00Z",
    content: "Short teaser uploaded. Files are all static — no CMS. Add posts by editing the posts array inside this file.",
    tags: ["teaser"]
  }
];
/* ============================================================ */

function escapeHtml(s){
  if(!s) return '';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function renderPosts(){
  const col = document.getElementById('postsColumn');
  col.innerHTML = '';
  // sort descending by date
  posts.sort((a,b)=> new Date(b.date) - new Date(a.date));
  posts.forEach(p=>{
    const art = document.createElement('article');
    art.className = 'post';
    const date = new Date(p.date);
    const timeStr = isNaN(date) ? p.date : date.toLocaleString();
    // allow simple HTML in content if user marks it explicitly: if content contains "<!-- html -->" at start
    let contentHtml = '';
    if(typeof p.content === 'string' && p.content.trim().startsWith('<!-- html -->')) {
      contentHtml = p.content.replace('<!-- html -->','');
    } else {
      contentHtml = '<div class="content">'+ escapeHtml(p.content) +'</div>';
    }
    const tagsHtml = (p.tags && p.tags.length) ? '<div style="margin:8px 0">'+ p.tags.map(t=>'<span class="tag">'+escapeHtml(t)+'</span>').join('') +'</div>' : '';
    art.innerHTML = `
      <h2>${escapeHtml(p.title)}</h2>
      <div class="meta">${timeStr}</div>
      ${tagsHtml}
      ${contentHtml}
    `;
    col.appendChild(art);
  });

  const count = posts.length;
  document.getElementById('postCount').innerText = count + ' post' + (count!==1 ? 's' : '') + ' — edit this file to add more.';
}

renderPosts();

/* Matrix-like canvas background */
(function matrix(){
  const cvs = document.getElementById('canvas');
  const ctx = cvs.getContext('2d');
  function resize(){ cvs.width = innerWidth; cvs.height = innerHeight; cols = Math.floor(cvs.width/14); drops = Array(cols).fill(1); }
  let cols = 0, drops = [];
  resize();
  addEventListener('resize', resize);
  function draw(){
    ctx.fillStyle = 'rgba(0,0,0,0.06)';
    ctx.fillRect(0,0,cvs.width,cvs.height);
    ctx.fillStyle = 'rgba(0,255,119,0.9)';
    ctx.font = '12px monospace';
    for(let i=0;i<cols;i++){
      const ch = String.fromCharCode(33 + Math.floor(Math.random()*94));
      ctx.fillText(ch, i*14, drops[i]*14);
      if(drops[i]*14 > cvs.height && Math.random()>0.975) drops[i] = 0;
      drops[i]++;
    }
  }
  setInterval(draw, 55);
})();

/* Download current HTML file (makes a copy of the current DOM's HTML) */
document.getElementById('downloadBtn').addEventListener('click', function(e){
  e.preventDefault();
  const html = '<!doctype html>\\n' + document.documentElement.outerHTML;
  const blob = new Blob([html], {type:'text/html'});
  const url = URL.createObjectURL(blob);
  this.href = url;
  // auto-revoke after a short time
  setTimeout(()=>URL.revokeObjectURL(url), 20000);
});
  </script>
</body>
</html>
